# words-path-finder
## Инструментарий
- Язык: Rust
- Среда: native
- Фреймворки:
  - actix-web 4.3.1
  - diesel ORM 2.1
  - reqwest 0.11 для веб-запросов

## Читы и шорткаты
К Rust я давно подбирался, был некоторый опыт разработки. В основном, алгоритмика (например, Advent of Code), плюс немного трогал игровые движки Amethyst и ggez (но давно уже). Опыта с асинхронностью, БД и webapi до этого не было.

## Сложности и проблемы
Как обычно, borrow checker не даёт расслабиться. diesel почему-то только синхронный. Поэтому получилось смешение подходов, когда надо и в БД сходить, и веб-запрос послать. Обработка ошибок тоже не всегда очевидна.

## Субъективные впечатления
Установка не вызвала сложностей, особенно, если заранее знать, что нужно использовать расширение rust-analyzer (не уверен, стал ли он дефолтным на этот момент).

Библиотеки нужно добавлять руками, иногда даже для каких-то мелочей, казалось бы. Например, чтоб использовать статическую изменяемую переменную (возможно, есть решение лучше). Подход такой понятен, на расте и для микроконтроллеров в режиме no_std пишут, лишнее тащить нельзя. Но непривычно после дотнета, где тебе сразу куча всего доступна.

Алгоритмика ожидаемо несложно перенеслась, только немного поборолся с borrow checker'ом.

actix-web по документации тоже довольно быстро подцепился. Немного пугает необходимость явно метод апи прописывать. Наверное, для больших проектов есть какое-то упрощение для массовой регистрации. Но в целом похоже на asp.net core. Тоже метод, тоже роут через атрибут и маппинг параметров, тоже миддлвари...

С кэшированием пришлось повозиться, никак не хотела система типов поддаваться на уговоры кэшировать асинхронщину. Но в итоге победил как-то.

Для БД использовал diesel и... самое хорошее в нём то, что он есть. Далеко не EntityFramework, конечно (может, и к лучшему). Странно, что даже при подходе code first надо отдельно расписывать модельки в коде и DSL для структуры БД. Причём по этой DSL он сгенерит структуру и миграцию (ура!), а потом перезапишет DSL заново по структуре из БД. Так, он мне упорно делал массив нуллабельных строк, хотя я хотел не-нуллабельные.

С добавлением работы с БД тоже не всё гладко было, diesel предлагается выносить в web::block, чтоб эмулировать асинхронность, и с настоящей асинхронностью это не очень хорошо смешивалось.

## Резюме
Непростой всё-таки язык. Подходил с более оптимистичными ожиданиями, пришлось помучаться. Если бы не было опыта до этого, наверное, бросил бы на половине. Но всё же интересный он своей системой типов и правилами построения code flow. Сложилось впечатление, что многие вещи я сделал не совсем правильно, и поэтому вышло так коряво. Надо набивать руку и смотреть примеры проектов.

Вероятно, позже попробую с другими фреймворками.